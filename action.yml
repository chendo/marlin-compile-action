name: 'Marlin Compiler'
description: 'Compiles Marlin and exposes the resulting firmware binary as an artifact'
inputs:
  platformio_args:
    description: 'Arguments passed to platformio run'
    required: false
    default: ''
  configuration_path: 
    description: 'Path to look for Configuration.h / Configuration_adv.h'
    required: false
    default: './Marlin/Marlin'
outputs:
  logs: 
    description: 'Build logs'
runs:
  using: 'docker'
  image: docker://ghcr.io/chendo/platformio@sha256:4af5d77e0603b7a54077b7891a82ad78215d26c2ea69f7bdd6ddd9d061ffb70a
  args:
    - ${{ inputs.platformio_args }}